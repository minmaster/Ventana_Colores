define("soporteData",["jquery","model","collection","view","dragdrop","soporteCarrito","viasCarrito","viasTejidos"],function(e,t,n,r,i,s,o,u){return{getSoporteData:function(a){e.ajax({url:url+"selectSoporte.json",type:"POST",data:{idsoporte:a},success:function(f){var l=jQuery.parseJSON(f);objetos=new n.Objetos,categorias=new n.Categorias,tejidos=new n.Tejidos,e("#medidas").empty(),e("#escenario").empty(),e("#soportesContainer").empty(),e("#list-vinilos-comprados").empty(),e(l.disenios[2]).each(function(e,t){objetos.add([{nombre:t.titulo,id:t.idDisenio,imagen:t.imagen,medidaVariable:t.tamanioVariable,categoria:t.idCategoria,ancho:t.ancho,alto:t.alto,descripcion:t.descripcion,greca:t.greca,precio:t.pvp,variosColores:t.variosColores,colores:t.numeroColores}])}),e(l.disenios[1]).each(function(e,t){objetos.add([{nombre:t.titulo,id:t.idDisenio,imagen:t.imagen,medidaVariable:t.tamanioVariable,categoria:t.idCategoria,ancho:t.ancho,alto:t.alto,descripcion:t.descripcion,greca:t.greca,precio:t.pvp,variosColores:t.variosColores,colores:t.numeroColores}])}),e(l.categorias).each(function(e,t){categorias.add([{nombre:t.nombreCategoria,id:t.idCategoria}])}),e(l.tejidos).each(function(e,t){tejidos.add([{nombre:t.descripcion,id:t.idTejido,imagen:t.imagen,precio:t.precioMedio}])}),viewObjetos&&viewObjetos.close(),viewTejidos&&viewTejidos.close(),viewObjetos=new r.ViewObjetos,viewTejidos=new r.ViewTejidos,e(".popup-tejidos").fadeIn("300"),e(".txt-nombre").text(l.soporte.nombre),e("input#productoId").val(l.soporte.idSoporte),e('input[name="anchoDefault"]').val(l.soporte.anchoPorDefecto),e('input[name="altoDefault"]').val(l.soporte.altoPorDefecto),e("input#anchoMinimo").val(l.soporte.anchoMin),e("input#altoMinimo").val(l.soporte.altoMin),e("input#anchoMaximo").val(l.soporte.anchoMax),e("input#altoMaximo").val(l.soporte.altoMax),e("#tejido").text(l.tejidoPorDefecto.descripcion),e("#tejidoId").val(l.tejidoPorDefecto.idTejido),drawObjeto(e("input#productoId").val()),drawSoporteMedidas(e("input#productoId").val()),l.soporte.idSoporte==8&&e("#tejido").css({display:"none"});if(l.soporte.dimensionesFijas==1){var h=e("#selectmedidas").html(),p=Handlebars.compile(h),d=p(l.medidas);e(".selectmedidas").html(d)}else{e(".medida_colcha").addClass("nodisplay"),e(".medida_estandar").removeClass("nodisplay"),e('.medida_estandar input[name="ancho"]').val(l.soporte.anchoPorDefecto),e('.medida_estandar input[name="alto"]').val(l.soporte.altoPorDefecto),g&&e(".spinnerAncho").spinner("destroy");var g=e(".spinnerAncho").spinner({step:1,numberFormat:"n",min:e("#anchoMinimo").val(),max:e("#anchoMaximo").val(),spin:function(t,n){if(localStorage["idSoporte"]!="6")getPrecioSoporte(),calcular_medida(e('.medida_estandar input[name="ancho"]').val(),e('.medida_estandar input[name="alto"]').val()),soporteProducto.set({ancho:e('.medida_estandar input[name="ancho"]').val()});else for(var r=0;r<localStorage.vias;r++){var i=viasCarrito.at(r);calcular_medida(e('.medida_estandar input[name="ancho"]').val(),e('.medida_estandar input[name="alto"]').val()),i.set({ancho:e('.medida_estandar input[name="ancho"]').val()}),getPrecioVia(r)}}});e('.medida_estandar input[name="ancho"]').change(function(){if(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e(this).val())){var t=parseInt(e("#anchoMinimo").val()),n=parseInt(e("#anchoMaximo").val()),r=e(this).val();r>=t&&r<=n?redimensionar("ancho",e(this).val()):r>n?(e(this).val(n),redimensionar("ancho",e(this).val())):r<t&&(e(this).val(t),redimensionar("ancho",e(this).val()))}else alert("Este campo solo admite datos númericos")}),e('.medida_estandar input[name="alto"]').change(function(){if(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e(this).val())){var t=parseInt(e("#altoMinimo").val()),n=parseInt(e("#altoMaximo").val()),r=e(this).val();r>=t&&r<=n?redimensionar("alto",e(this).val()):r>n?(e(this).val(n),redimensionar("alto",e(this).val())):r<t&&(e(this).val(t),redimensionar("alto",e(this).val()))}else alert("Este campo solo admite datos númericos")}),uiSpinnerAlto&&e(".spinnerAlto").spinner("destroy"),uiSpinnerAlto=e(".spinnerAlto").spinner({step:1,numberFormat:"n",min:e("#altoMnimo").val(),max:e("#altoMaximo").val(),spin:function(t,n){if(localStorage["idSoporte"]!="6")getPrecioSoporte(),calcular_medida(e('.medida_estandar input[name="ancho"]').val(),e('.medida_estandar input[name="alto"]').val()),soporteProducto.set({alto:e('.medida_estandar input[name="alto"]').val()});else for(var r=0;r<localStorage.vias;r++){var i=viasCarrito.at(r);calcular_medida(e('.medida_estandar input[name="ancho"]').val(),e('.medida_estandar input[name="alto"]').val()),i.set({alto:e('.medida_estandar input[name="alto"]').val()}),getPrecioVia(r)}}})}if(localStorage.vias>0)var y=!0;else var y=!1;soporteProducto=new t.SoporteProducto({producto:l.soporte.nombre,id:a,unidades:1,ancho:l.soporte.anchoPorDefecto,alto:l.soporte.altoPorDefecto,con_vias:y,vias:localStorage.vias,tejidoId:l.tejidoPorDefecto.idTejido,tejidoNombre:l.tejidoPorDefecto.descripcion}),viasCarrito=new n.ViaCarrito;for(var b=1;b<=localStorage.vias;b++)viasCarrito.add([{via:b,tejidoId:l.tejidoPorDefecto.idTejido,tejidoNombre:l.tejidoPorDefecto.descripcion,ancho:l.soporte.anchoPorDefecto,alto:l.soporte.altoPorDefecto,color:""}]);var w=getPrecioSoporte(),E=new s,S=new o;if(localStorage.vias>0)var x=new u;var h=e("#colores-disenios").html(),p=Handlebars.compile(h),d=p(l.colores_disenios);e(".colores-disenios").html(d);if(localStorage["idSoporte"]!="6"){var h=e("#colores-soporte").html(),p=Handlebars.compile(h),d=p(l.coloresSoporteDefecto);e(".colores-soporte").html(d)}else e("#coloresSoportes").hide();e(".paleta-colores li span").each(function(t,n){var r=e(this).html();e(this).css({background:"#"+r})}),slideContent(".colores-disenios"),dragColoresSoportes(),i.dragdrop(),e(".divLoader").fadeOut("fast")}})}}});