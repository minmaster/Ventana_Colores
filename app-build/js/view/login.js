define("login",["underscore","backbone","jquery","handlebars","popup","model"],function(e,r,o,i,T,u){var v=r.View.extend({el:o("#contContainer"),initialize:function(){this.render()},events:{"click button":"buttonLogin"},render:function(){if(e){location.reload();var e=!0}var r={},T=o("#loginTemplate").html(),u=i.compile(T),v=u(r);this.$el.html(v);o("#contContainer").css({display:"block"});o(".divLoader").fadeOut("fast")},buttonLogin:function(e){e.preventDefault();var r=o(".login form");validar_formulario(r,e)&&o.ajax({url:url+"login.json",type:"POST",data:r.serialize(),success:function(e){var r=jQuery.parseJSON(e);if(r.result){var r=r.result;cliente=new u.Cliente;cliente.set({id:r.idTienda,usuario:r.login,email:r.email,factor:r.factor});factor=cliente.get("factor");appRouter.navigate("",!0);o(".divLoader").fadeOut("fast");o("#contContainer").fadeOut("fast",function(){o("#contContainer").empty()})}else{popupModel=new u.Popup;popupModel.set("message","El usuario o la contrase√±a que ha escrito son incorrectos");new T}}})},close:function(){this.undelegateEvents()}});return v});