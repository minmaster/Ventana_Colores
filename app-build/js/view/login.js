define("login",["underscore","backbone","jquery","handlebars","popup","model"],function(e,t,n,r,i,s){var o=t.View.extend({el:n("#contContainer"),initialize:function(){this.render()},events:{"click button":"buttonLogin"},render:function(){if(e){location.reload();var e=!0}var t={},i=n("#loginTemplate").html(),s=r.compile(i),o=s(t);this.$el.html(o),n("#contContainer").css({display:"block"}),n(".divLoader").fadeOut("fast")},buttonLogin:function(e){e.preventDefault();var t=n(".login form");validar_formulario(t,e)&&n.ajax({url:url+"login.json",type:"POST",data:t.serialize(),success:function(e){var t=jQuery.parseJSON(e);if(!t.result)popupModel=new s.Popup,popupModel.set("message","El usuario o la contrase√±a que ha escrito son incorrectos"),new i;else{var t=t.result;cliente=new s.Cliente,cliente.set({id:t.idTienda,usuario:t.login,email:t.email,factor:t.factor}),factor=cliente.get("factor"),appRouter.navigate("",!0),n(".divLoader").fadeOut("fast"),n("#contContainer").fadeOut("fast",function(){n("#contContainer").empty()})}}})},close:function(){this.undelegateEvents()}});return o});