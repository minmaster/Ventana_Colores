(function(e,r,o){var i,T,v=e.event;i=v.special.debouncedresize={setup:function(){e(this).on("resize",i.handler)},teardown:function(){e(this).off("resize",i.handler)},handler:function(e,r){var o=this,u=arguments,b=function(){e.type="debouncedresize";v.dispatch.apply(o,u)};T&&clearTimeout(T);r?b():T=setTimeout(b,i.threshold)},threshold:150};var u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(r){function i(){var o=e(l),i=e(t);b&&(t.length?b.reject(z,o,i):b.resolve(z));e.isFunction(r)&&r.call(v,z,o,i)}function T(r,o){if(r.src!==u&&-1===e.inArray(r,n)){n.push(r);o?t.push(r):l.push(r);e.data(r,"imagesLoaded",{isBroken:o,src:r.src});C&&b.notifyWith(e(r),[o,z,e(l),e(t)]);if(z.length===n.length){setTimeout(i);z.unbind(".imagesLoaded")}}}var v=this,b=e.isFunction(e.Deferred)?e.Deferred():0,C=e.isFunction(b.notify),z=v.find("img").add(v.filter("img")),n=[],l=[],t=[];e.isPlainObject(r)&&e.each(r,function(e,o){"callback"===e?r=o:b&&b[e](o)});z.length?z.bind("load.imagesLoaded error.imagesLoaded",function(e){T(e.target,"error"===e.type)}).each(function(r,i){var v=i.src,b=e.data(i,"imagesLoaded");if(b&&b.src===v)T(i,b.isBroken);else if(i.complete&&i.naturalWidth!==o)T(i,0===i.naturalWidth||0===i.naturalHeight);else if(i.readyState||i.complete){i.src=u;i.src=v}}):i();return b?b.promise(v):v};var b=e(r),C=r.Modernizr;e.Elastislide2=function(r,o){this.$el=e(o);this._init(r)};e.Elastislide2.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}};e.Elastislide2.prototype={_init:function(r){this.options=e.extend(!0,{},e.Elastislide2.defaults,r);var o=this,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=i[C.prefixed("transition")];this.support=C.csstransitions&&C.csstransforms;this.current=this.options.start;this.isSliding=!1;this.$items=this.$el.children("li");this.itemsCount=this.$items.length;if(0===this.itemsCount)return!1;this._validate();this.$items.detach();this.$el.empty();this.$el.append(this.$items);this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>');this.hasTransition=!1;this.hasTransitionTimeout=setTimeout(function(){o._addTransition()},100);this.$el.imagesLoaded(function(){o.$el.show();o._layout();o._configure();if(o.hasTransition){o._removeTransition();o._slideToItem(o.current);o.$el.on(o.transEndEventName,function(){o.$el.off(o.transEndEventName);o._setWrapperSize();o._addTransition();o._initEvents()})}else{clearTimeout(o.hasTransitionTimeout);o._setWrapperSize();o._initEvents();o._slideToItem(o.current);setTimeout(function(){o._addTransition()},25)}o.options.onReady()})},_validate:function(){0>this.options.speed&&(this.options.speed=500);(1>this.options.minItems||this.options.minItems>this.itemsCount)&&(this.options.minItems=1);(0>this.options.start||this.options.start>this.itemsCount-1)&&(this.options.start=0);"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>');this.$carousel=this.$el.parent();this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var e=this.$items.find("img:first");this.imgSize={width:e.outerWidth(!0),height:e.outerHeight(!0)};this._setItemsSize();"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height);this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing);this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s");this.hasTransition=!1},_addControls:function(){var r=this;this.$navigation=e('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper);this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(){r._slide("prev");return!1});this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(){r._slide("next");return!1})},_setItemsSize:function(){var e="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:e+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height});"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var r=this;b.on("debouncedresize.elastislide",function(){r._setItemsSize();r._configure();r._slideToItem(r.current)});this.$el.on(this.transEndEventName,function(){r._onEndTransition()});"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){r._slide("next")},swiperight:function(){r._slide("prev")}}):this.$el.on({swipeup:function(){r._slide("next")},swipedown:function(){r._slide("prev")}});this.$el.on("click.elastislide","li",function(o){var i=e(this);r.options.onClick(i,i.index(),o)})},_destroy:function(e){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide");b.off(".elastislide");this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper);this.$items.css({width:"auto","max-width":"none","max-height":"none"});this.$navigation.remove();this.$wrapper.remove();e&&e.call()},_toggleControls:function(e,r){r?"next"===e?this.$navNext.show():this.$navPrev.show():"next"===e?this.$navNext.hide():this.$navPrev.hide()},_slide:function(r,i){if(this.isSliding)return!1;this.options.onBeforeSlide();this.isSliding=!0;var T=this,v=this.translation||0,u="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),b=this.itemsCount*u,C="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(i===o){var z=this.fitCount*u;if(0>z)return!1;if("next"===r&&C>b-(Math.abs(v)+z)){z=b-(Math.abs(v)+C);this._toggleControls("next",!1);this._toggleControls("prev",!0)}else if("prev"===r&&0>Math.abs(v)-z){z=Math.abs(v);this._toggleControls("next",!0);this._toggleControls("prev",!1)}else{var n="next"===r?Math.abs(v)+Math.abs(z):Math.abs(v)-Math.abs(z);n>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1);b-C>n?this._toggleControls("next",!0):this._toggleControls("next",!1)}i="next"===r?v-z:v+z}else{var z=Math.abs(i);C>Math.max(b,C)-z&&(i=-(Math.max(b,C)-C));z>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1);Math.max(b,C)-C>z?this._toggleControls("next",!0):this._toggleControls("next",!1)}this.translation=i;if(v===i){this._onEndTransition();return!1}if(this.support)"horizontal"===this.options.orientation?this.$el.css("transform","translateX("+i+"px)"):this.$el.css("transform","translateY("+i+"px)");else{e.fn.applyStyle=this.hasTransition?e.fn.animate:e.fn.css;var l="horizontal"===this.options.orientation?{left:i}:{top:i};this.$el.stop().applyStyle(l,e.extend(!0,[],{duration:this.options.speed,complete:function(){T._onEndTransition()}}))}this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1;this.options.onAfterSlide()},_slideTo:function(e){var e=e||this.current,r=Math.abs(this.translation)||0,o="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),i=r+this.$carousel.width(),T=Math.abs(e*o);(T+o>i||r>T)&&this._slideToItem(e)},_slideToItem:function(e){var r="horizontal"===this.options.orientation?e*this.$items.outerWidth(!0):e*this.$items.outerHeight(!0);this._slide("",-r)},add:function(e){var r=this,o=this.current,i=this.$items.eq(this.current);this.$items=this.$el.children("li");this.itemsCount=this.$items.length;this.current=i.index();this._setItemsSize();this._configure();this._removeTransition();this.current>o?this._slideToItem(this.current):this._slide("next",this.translation);setTimeout(function(){r._addTransition()},25);e&&e.call()},setCurrent:function(e,r){this.current=e;this._slideTo();r&&r.call()},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(e){this._destroy(e)}};var z=function(e){r.console&&r.console.error(e)};e.fn.elastislide=function(r){var o=e.data(this,"elastislide");if("string"==typeof r){var i=Array.prototype.slice.call(arguments,1);this.each(function(){o?e.isFunction(o[r])&&"_"!==r.charAt(0)?o[r].apply(o,i):z("no such method '"+r+"' for elastislide self"):z("cannot call methods on elastislide prior to initialization; attempted to call method '"+r+"'")})}else this.each(function(){o?o._init():o=e.data(this,"elastislide",new e.Elastislide2(r,this))});return o}})(jQuery,window);