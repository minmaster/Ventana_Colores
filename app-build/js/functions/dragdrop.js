define("dragdrop",["jquery","jqueryui","view"],function(e,r,o){return{dragdrop:function(){e("#coloresVinilos li span").draggable({scroll:!1,start:function(){stopVinilo=!1;e(".mask").css({overflow:"visible"})},drag:function(r,o){stopVinilo=!1;e(this).data("draggable");colorVinilo=e(this).html();colorId=e(this).attr("title");var T=o.helper.offset(),i=e("#escenario canvas").offset(),v={right:e("#escenario canvas").width()+i.left,bottom:e("#escenario canvas").height()+i.top};snapped=parseInt(T.left)>parseInt(v.right)?!1:parseInt(T.left)<parseInt(i.left)?!1:parseInt(T.top)>parseInt(v.bottom)?!1:parseInt(T.top)<parseInt(i.top)?!1:!0},stop:function(){if(snapped){colorVinilo=e(this).html();stopVinilo=!0}e(".mask").css({overflow:"hidden"})},helper:"clone"});e("li.symbol").draggable({appendTo:"body",containment:"window",scroll:!1,start:function(){e(this).parent().parent();e(".elastislide-carousel").css({overflow:"visible"});var r=e(this).attr("id");e(".ui-draggable-dragging img").remove();e(".ui-draggable-dragging").append("<div class='mask' id='maskSymbol'></div>");2*e(this).attr("mwidth");2*e(this).attr("mheight");Symbol(r,2e3,2e3);snapped=!1},drag:function(r,o){e(this).data("draggable");var T=o.helper.offset(),i=e("#escenario canvas").offset(),v={right:e("#escenario canvas").width()+i.left,bottom:e("#escenario canvas").height()+i.top};snapped=parseInt(T.left)>parseInt(v.right)?!1:parseInt(T.left)<parseInt(i.left)?!1:parseInt(T.top)>parseInt(v.bottom)?!1:parseInt(T.top)<parseInt(i.top)?!1:!0},stop:function(){e(this).parent().parent();e(".elastislide-carousel").css({overflow:"hidden"});if(snapped){var r=e(".ui-draggable-dragging").offset().left,T=e(".ui-draggable-dragging").offset().top,i=e(".main .center").offset().left,v=e(".main .center").offset().top,u=r-i,b=T-v,C=e(this).attr("id"),z=e(this).attr("width"),l=e(this).attr("height"),n=e(this).attr("colores"),t=indexObject;indexObject+=1;var a=e(this).attr("breca"),z=parseInt(e(this).attr("mwidth")),l=parseInt(e(this).attr("mheight")),s=e(".titulo",this).text();e(".descripcion",this).text();var c=e(".precio",this).text(),C=e(this).attr("id");if(a>0){if(1==a)var h=z;else var h=l;if(e("#greca"+C).length){var m=parseInt(e("#greca"+C+" input").val());e("#greca"+C+" input.medidaGreca").val(m+h);var P=e("#greca"+C+" .ui-spinner").next().val(),d=e("#greca"+C+" .ui-spinner").next().next().val();e("#greca"+C+" .pvp span").text(calcularNuevoPrecio(P,d,e("#greca"+C+" input.medidaGreca").val()));calcularTotal()}else{var f={name:s,height:h,id:C,precio:c},p=e("#greca").html(),g=Handlebars.compile(p),S=g(f);e("#list-grecas").append(S);e("#greca"+C+" input.medidaGreca").spinner({step:1,numberFormat:"n",min:20,spin:function(){var r=e("#greca"+C+" .ui-spinner").next().val(),o=e("#greca"+C+" .ui-spinner").next().next().val();e("#greca"+C+" .pvp span").text(calcularNuevoPrecio(r,o,e(this).val()));calcularTotal()}});e("#greca"+C+" input.medidaGreca").change(function(){var r=e("#greca"+C+" .ui-spinner").next().val(),o=e("#greca"+C+" .ui-spinner").next().next().val();e("#greca"+C+" .pvp span").text(calcularNuevoPrecio(r,o,e(this).val()));calcularTotal()})}e("input.medidaGreca").on("keyup change click",function(){var r=e(this).next().val(),o=e(this).next().next().val();e("#greca"+t+" .pvp span").text(calcularNuevoPrecio(r,o,e(this).val()));calcularTotal()})}if(0==a)var y=!1;else var y=!0;carrito.add([{producto:s,id:t,dibujo:C,greca:y,precio:c,precioUnidad:c,unidades:1,ancho:z,alto:l}]);new o.ViewCarrito;calcularTotal();98==C||99==C?symbolStage(C,t,u,b,e("input#producto").val(),z,l,n,!0):symbolStage(C,t,u,b,e("input#producto").val(),z,l,n,!1)}},snap:"#escenario canvas",helper:"clone"})}}});