define("dragdrop",["jquery","jqueryui","view"],function(e,t,n){return{dragdrop:function(){e("#coloresVinilos li span").draggable({scroll:!1,start:function(t,n){stopVinilo=!1,e(".mask").css({overflow:"visible"})},drag:function(t,n){stopVinilo=!1;var r=e(this).data("draggable");colorVinilo=e(this).html(),colorId=e(this).attr("title");var i=n.helper.offset(),s=e("#escenario canvas").offset(),o={right:e("#escenario canvas").width()+s.left,bottom:e("#escenario canvas").height()+s.top};parseInt(i.left)>parseInt(o.right)?snapped=!1:parseInt(i.left)<parseInt(s.left)?snapped=!1:parseInt(i.top)>parseInt(o.bottom)?snapped=!1:parseInt(i.top)<parseInt(s.top)?snapped=!1:snapped=!0},stop:function(t,n){snapped&&(colorVinilo=e(this).html(),stopVinilo=!0),e(".mask").css({overflow:"hidden"})},helper:"clone"}),e("li.symbol").draggable({appendTo:"body",containment:"window",scroll:!1,start:function(t,n){var r=e(this).parent().parent();e(".elastislide-carousel").css({overflow:"visible"});var i=e(this).attr("id");e(".ui-draggable-dragging img").remove(),e(".ui-draggable-dragging").append("<div class='mask' id='maskSymbol'></div>");var s=e(this).attr("mwidth")*2,o=e(this).attr("mheight")*2;Symbol(i,2e3,2e3),snapped=!1},drag:function(t,n){var r=e(this).data("draggable"),i=n.helper.offset(),s=e("#escenario canvas").offset(),o={right:e("#escenario canvas").width()+s.left,bottom:e("#escenario canvas").height()+s.top};parseInt(i.left)>parseInt(o.right)?snapped=!1:parseInt(i.left)<parseInt(s.left)?snapped=!1:parseInt(i.top)>parseInt(o.bottom)?snapped=!1:parseInt(i.top)<parseInt(s.top)?snapped=!1:snapped=!0},stop:function(t,r){var i=e(this).parent().parent();e(".elastislide-carousel").css({overflow:"hidden"});if(snapped){var s=e(".ui-draggable-dragging").offset().left,o=e(".ui-draggable-dragging").offset().top,u=e(".main .center").offset().left,a=e(".main .center").offset().top,f=s-u,l=o-a,c=e(this).attr("id"),h=e(this).attr("width"),p=e(this).attr("height"),d=e(this).attr("colores"),m=indexObject;indexObject+=1;var g=e(this).attr("breca"),h=parseInt(e(this).attr("mwidth")),p=parseInt(e(this).attr("mheight")),y=e(".titulo",this).text(),b=e(".descripcion",this).text(),w=e(".precio",this).text(),c=e(this).attr("id");if(g>0){if(g==1)var E=h;else var E=p;if(e("#greca"+c).length){var S=parseInt(e("#greca"+c+" input").val());e("#greca"+c+" input.medidaGreca").val(S+E);var x=e("#greca"+c+" .ui-spinner").next().val(),T=e("#greca"+c+" .ui-spinner").next().next().val();e("#greca"+c+" .pvp span").text(calcularNuevoPrecio(x,T,e("#greca"+c+" input.medidaGreca").val())),calcularTotal()}else{var N={name:y,height:E,id:c,precio:w},C=e("#greca").html(),k=Handlebars.compile(C),L=k(N);e("#list-grecas").append(L),e("#greca"+c+" input.medidaGreca").spinner({step:1,numberFormat:"n",min:20,spin:function(t,n){var r=e("#greca"+c+" .ui-spinner").next().val(),i=e("#greca"+c+" .ui-spinner").next().next().val();e("#greca"+c+" .pvp span").text(calcularNuevoPrecio(r,i,e(this).val())),calcularTotal()}}),e("#greca"+c+" input.medidaGreca").change(function(){var t=e("#greca"+c+" .ui-spinner").next().val(),n=e("#greca"+c+" .ui-spinner").next().next().val();e("#greca"+c+" .pvp span").text(calcularNuevoPrecio(t,n,e(this).val())),calcularTotal()})}e("input.medidaGreca").on("keyup change click",function(){var t=e(this).next().val(),n=e(this).next().next().val();e("#greca"+m+" .pvp span").text(calcularNuevoPrecio(t,n,e(this).val())),calcularTotal()})}if(g==0)var A=!1;else var A=!0;carrito.add([{producto:y,id:m,dibujo:c,greca:A,precio:w,precioUnidad:w,unidades:1,ancho:h,alto:p}]);var O=new n.ViewCarrito;calcularTotal(),c==98||c==99?symbolStage(c,m,f,l,e("input#producto").val(),h,p,d,!0):symbolStage(c,m,f,l,e("input#producto").val(),h,p,d,!1)}},snap:"#escenario canvas",helper:"clone"})}}});