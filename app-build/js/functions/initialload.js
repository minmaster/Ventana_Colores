define("initialload",["jquery","handlebars","collection","variosColores","model","popup","routes"],function(e,r,o,i,T,v){function u(){calcularAltoScroll();e(".main .center").on("click",function(){e(".menuObjetos").css({visibility:"hidden"});e(".menuObjetos .submenu").css({top:"-5px"})});e(".sidebar-bottom").on("click",function(){e(".menuObjetos").css({visibility:"hidden"});e(".menuObjetos .submenu").css({top:"-5px"})});e("input").bind("focus",function(){e(window).scrollTop(10);var r=e(window).scrollTop()>0;e(window).scrollTop(0);e("#test").append(r?"keyboard ":"nokeyboard ")});carrito=new o.Carrito;e("#tejido").click(function(){e(".popup-tejidos").fadeIn("300")});e(".popup-tejidos .btn-cerrar").click(function(){e(".popup-tejidos").fadeOut("300")});e(".btn-delete").click(function(){if(e(this).hasClass("activo")){e("#list-vinilos-comprados .pd").each(function(){e(".uds",this).css({display:"block"});e(".delete",this).css({display:"none"})});e(this).removeClass("activo")}else{e("#list-vinilos-comprados .pd").each(function(){e(".uds",this).css({display:"none"});e(".delete",this).css({display:"block"})});e(this).addClass("activo")}e("span.delete").on("click",function(){var r=e(this).parent().attr("id"),o=e(this).parent().attr("dibujo"),i=e(this).parent().index(),T=i+1;simbolosArray[r].remove();e("#list-vinilos-comprados .pd:nth-child("+T+")").remove();if(e("#greca"+o).length){var v=e("#greca"+o+" input.medidaGreca").val();v>100?e("#greca"+o+" input.medidaGreca").val(v-100):e("#greca"+o).remove()}var u=carrito.get(r);carrito.remove(u);calcularTotal();layer.draw()})});e(".medida_colcha select").change(function(){var r=e(this).val().split("-");calcular_medida(r[0],r[1]);e('input[name="ancho"]').val(r[0]);e('input[name="alto"]').val(r[1]);soporteProducto.set({ancho:r[0],alto:r[1]});getPrecioSoporte();e(".pd .name .medida").text(r[0]+"x"+r[1])});e(".btnErase").on("click",function(){var r=e(this).attr("id"),o=e("#list-vinilos-comprados #"+r).attr("dibujo");simbolosArray[r].remove();e("#list-vinilos-comprados #"+r).remove();if(e("#greca"+o).length){var i=e("#greca"+o+" input.medidaGreca").val();i>100?e("#greca"+o+" input.medidaGreca").val(i-100):e("#greca"+o).remove()}calcularTotal();layer.draw();e(".menuObjetos").css({visibility:"hidden"})});e(".btnRotate").on("click",function(){var r=e(this).attr("id");productoSelected=carrito.get(r);Slider&&e("#sliderRotar").slider("destroy");Slider=e("#sliderRotar").slider({min:-180,max:180,value:productoSelected.get("rotacion"),slide:function(e,o){parseInt(simbolosArray[r].getRotationDeg());var i=simbolosArray[r];productoSelected.set({rotacion:o.value});i.setRotation(0);i.rotate(o.value*Math.PI/180);layer.draw()}});e(".menuObjetos .submenu .tab").css({display:"none"});e(".menuObjetos .submenu").transition({top:"30px"},function(){e(".divRotar").css({display:"block"})})});e(".btnColorear").on("click",function(){var r=e(this).attr("dibujo"),o=e(this).attr("id"),T=objetos.listbyId(r);objetoSelected=T.at(0);productoSelected=carrito.get(o);viewVariosColores&&viewVariosColores.close();viewVariosColores=new i});e(".aviso_colores").hover(function(){var e="*Nota: Los colores de la pantalla son aproximados, comprobar con los reales en los puntos de venta.";popupModel=new T.Popup;popupModel.set("message",e);var r=new v;r.render()},function(){var e=new v;e.cerrarPopup()});e(".hoverTotal").hover(function(){var e="* Instalación no incluida <br />*Nota: Los colores de la pantalla son aproximados, comprobar con los reales en los puntos de venta.";popupModel=new T.Popup;popupModel.set("message",e);var r=new v;r.render()},function(){var e=new v;e.cerrarPopup()});e(".btnTexto").on("click",function(){e(this).attr("dibujo");var r=e(this).attr("id");productoSelected=carrito.get(r);e(".menuObjetos .submenu .tab").css({display:"none"});e(".menuObjetos .submenu").transition({top:"30px"},function(){e(".divTexto").css({display:"block"})});e("#textoObjeto").val(productoSelected.get("texto"));e("#textoObjeto").unbind("keyup");e("#textoObjeto").on("keyup",function(){var o=e(this).val();simbolosArray[r].setText(o);var i=productoSelected.get("precioUnidad")*o.length;productoSelected.set({precio:i.toFixed(2),texto:o});layer.draw()});e("#textoObjeto").on("blur",function(){e(".menuObjetos").css({visibility:"hidden"})})});e(".container").click(function(r){r.stopPropagation();if(e(".popup-open").length){e(".popup-content .content").fadeOut("fast");e(".popup-content .opacity").fadeOut("fast",function(){e(".popup-content").transition({width:"0"},400,"in");e(".popup-content").removeClass("popup-open")});e("header h2").transition({x:"90",opacity:0},300,"snap",function(){e("header h2").text("Seleccione el producto que desea diseñar");e("header h2").transition({x:"0",opacity:1},300,"snap")})}e(".popup-open-help").length&&e(".popup-help").transition({x:"300"},300,"snap",function(){e(".popup-help").removeClass("popup-open-help")})});r.registerHelper("selected",function(r,o){var i=e('input[name="anchoDefault"]').val(),T=e('input[name="altoDefault"]').val(),v="";i==r&&T==o&&(v="selected");return v});r.registerHelper("factor",function(e){var r=e;factor>0&&(r*=factor);return r})}return{initialLoad:u}});